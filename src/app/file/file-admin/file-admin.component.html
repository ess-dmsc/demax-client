<div *ngIf="currentFileUpload" class="progress">
	<div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
	     attr.aria-valuenow="{{progress.percentage}}"
	     aria-valuemin="0" aria-valuemax="100" [ngStyle]="{width:progress.percentage+'%'}">
		{{progress.percentage}}%
	</div>
</div>
<app-message [message]="message.message"></app-message>

<label class="btn btn-default">
	<input type="file" (change)="selectFile($event)">
</label>

<br>

<table mat-table datasrc="fileUploads | async" style="width: 100%;">

	<ng-container matColumnDef="filename">
		<th mat-header-cell *matHeaderCellDef>Filename</th>
		<td mat-cell *matCellDef="let file"> {{file}}</td>
	</ng-container>

	<ng-container matColumnDef="attachmentType">
		<th mat-header-cell *matHeaderCellDef>Attachment type</th>
		<td mat-cell *matCellDef="let file"> {{file}}</td>
	</ng-container>

	<ng-container matColumnDef="size">
		<th mat-header-cell *matHeaderCellDef>Filesize</th>
		<td mat-cell *matCellDef="let file"> {{file.size}}</td>
	</ng-container>

	<ng-container matColumnDef="fileType">
		<th mat-header-cell *matHeaderCellDef>Filetype</th>
		<td mat-cell *matCellDef="let file"> {{file}}</td>
	</ng-container>

	<ng-container matColumnDef="options">
		<th mat-header-cell *matHeaderCellDef>Options</th>
		<td mat-cell *matCellDef="let file">
			<a href="/api/admin/file/download/{{file}}">{{file}}</a>
			<button mat-raised-button color="warn" (click)="delete(file)">
				<mat-icon>delete</mat-icon>
			</button>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedFileColumns"></tr>
	<tr mat-row *matRowDef="let row; columns: displayedFileColumns;"></tr>
</table>

<div class="panel panel-primary">
	<div class="panel-heading">List of Files</div>
	<div *ngIf="isLoading" style="text-align: center;">
		<div class="lds-ripple">
			<div></div>
			<div></div>
		</div>
	</div>
	<div *ngIf="!isLoading">
		<div *ngFor="let file of fileUploads | async">
			<div class="panel-body">
				<a href="/api/admin/file/download/{{file}}">{{file}}</a>
				<button mat-raised-button color="warn" (click)="delete(file)">
					<mat-icon>delete</mat-icon>
				</button>
			</div>
		</div>
	</div>

</div>